<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Carrito</title>
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/256/12457/12457612.png">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
</head>
<style>
.custom-abbr {
    position: relative;
}

.custom-abbr:hover::after {
    content: attr(title);
    position: absolute;
    top: 110%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #333333;
    color: white;
    padding: 8px 12px;
    border-radius: 5px;
    font-size: 14px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 10;
}

.custom-abbr:hover::after {
    opacity: 1;
    visibility: visible;
}
</style>

<body class="bg-gray-100">
    <nav class="h-20 w-full bg-[#232F3E] flex pl-5 pr-5 items-center justify-between space-x-6">
        <a href="#" class="w-40 p-1 flex-shrink-0 max-[600px]:w-32">
            <img src="img/sale.png" alt="Logo">
        </a>

        <div class="flex-grow flex max-[600px]:w-[75%] max-[600px]:mr-4">
            <input type="text"
                class="md:w-[29rem] max-[600px]:w-[75%] border border-gray-500 p-2 rounded-md rounded-r-none"
                placeholder="Buscar en BigSale.es. ej: Motor de auto, telÃ©fonos, consolas, etc.">

            <button
                class="w-11 h-11 bg-gray-100 border border-gray-500 border-l-white rounded-md rounded-l-none flex justify-center items-center">
                <img src="img/lupa.png" alt="Buscar" class="w-6">
            </button>
        </div>

        <div>
            <input type="checkbox" id="menu-toggle" class="hidden">
            <label for="menu-toggle" class="cursor-pointer block lg:hidden">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Hamburger_icon.svg/1024px-Hamburger_icon.svg.png"
                    alt="Menu" class="w-8 h-8 object-contain">
            </label>
        </div>
        <div class="hidden lg:flex">
            <ul class="list-none p-0 flex space-x-4">
                <li>
                    <a href="" class="text-white hover:bg-blue-500 p-1 rounded transition-colors duration-200 flex">
                        <abbr title="Inicio" class="custom-abbr">
                            <img src="img/house.png" alt="Inicio" class="w-7 h-7">
                        </abbr>
                    </a>
                </li>
                <li>
                    <a href="" class="text-white hover:bg-blue-500 p-1 rounded transition-colors duration-200 flex">
                        <abbr title="Tienda" class="custom-abbr">
                            <img src="img/bolsa.png" alt="Tienda" class="w-7 h-7">
                        </abbr>
                    </a>
                </li>
                <li>
                    <a href="" class="text-white hover:bg-blue-500 p-1 rounded transition-colors duration-200 flex">
                        <abbr title="Contacto" class="custom-abbr">
                            <img src="img/contact.png" alt="Contacto" class="w-9 h-7">
                        </abbr>
                    </a>
                </li>
                <li>
                    <a href="" class="text-white hover:bg-blue-500 p-1 rounded transition-colors duration-200 flex">
                        <abbr title="Acerca de" class="custom-abbr">
                            <img src="img/about.png" alt="Acerca de" class="w-7 h-7">
                        </abbr>
                    </a>
                </li>
            </ul>
        </div>

        <div id="menu"
            class="hidden absolute top-16 right-5 bg-[#333333] border border-gray-300 rounded-lg w-48 p-4 shadow-lg z-50 max-[600px]:top-14 lg:hidden">
            <div
                class="absolute -top-2 right-0 w-0 h-0 border-l-[10px] border-r-[10px] border-b-[10px] border-transparent border-b-[#333333]">
            </div>
            <ul class="space-y-2">
                <li><a href=""
                        class="block text-white hover:bg-blue-500 p-2 rounded transition-colors duration-200">Inicio</a>
                </li>
                <li><a href=""
                        class="block text-white hover:bg-blue-500 p-2 rounded transition-colors duration-200">Productos</a>
                </li>
                <li><a href=""
                        class="block text-white hover:bg-blue-500 p-2 rounded transition-colors duration-200">Contacto</a>
                </li>
                <li><a href=""
                        class="block text-white hover:bg-blue-500 p-2 rounded transition-colors duration-200">Acerca</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-6">
        <div class="productos">
            <div class="producto border rounded-lg p-4 bg-white hover:scale-105 transition-transform duration-300 ease-out"
                data-nombre="Nintendo Switch" data-precio="$299.99">
                <img src="https://naovzla.com/cdn/shop/products/switch._1200x.png?v=1676577827" alt="Nintendo Switch"
                    class="object-cover mb-4 w-80 h-36">
                <h3 class="text-lg font-bold">Nintendo Switch</h3>
                <p class="text-gray-700">Precio: $299.99</p>
                <label for="cantidad1" class="block text-gray-600">Cantidad:</label>
                <input type="number" id="cantidad1" value="1" min="1" class="border rounded p-1 w-16">
                <button
                    class="bg-[#3483FA] text-white px-3 py-2 mt-2 rounded transition-colors duration-300 ease-in-out hover:bg-[#1259C3]"
                    onclick="agregarProducto('Nintendo Switch', 299.99, document.getElementById('cantidad1').value)">
                    Agregar al carrito
                </button>
            </div>

            <div class="producto border rounded-lg p-4 bg-white mt-4 hover:scale-105 transition-transform duration-300 ease-out"
                data-nombre="Samsung s24 Ultra" data-precio="1000.25">
                <img src="https://images.samsung.com/is/image/samsung/p6pim/latin/2401/gallery/latin-galaxy-s24-s928-sm-s928bzkugto-thumb-539326153"
                    alt="Samsung s24 Ultra" class="object-cover mb-4 w-80 h-72">
                <h3 class="text-lg font-bold">Samsung s24 Ultra</h3>
                <p class="text-gray-700">Precio: $1000.25</p>
                <label for="cantidad2" class="block text-gray-600">Cantidad:</label>
                <input type="number" id="cantidad2" value="1" min="1" class="border rounded p-1 w-16">
                <button
                    class="bg-[#3483FA] text-white px-3 py-2 mt-2 rounded transition-colors duration-300 ease-in-out hover:bg-[#1259C3]"
                    onclick="agregarProducto('Samsung s24 Ultra', 1000.25, document.getElementById('cantidad2').value)">
                    Agregar al carrito
                </button>
            </div>
        </div>

        <div class="mt-10 lg:mt-0">
            <h2 class="text-2xl font-bold mb-4">Carrito de Compras</h2>
            <table class="w-full text-left border border-[#F3F4F6]">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="p-2 border border-[#F3F4F6]">Producto</th>
                        <th class="p-2 border border-[#F3F4F6]">Cantidad</th>
                        <th class="p-2 border border-[#F3F4F6]">Precio ($)</th>
                        <th class="p-2 border border-[#F3F4F6]">Eliminar</th>
                    </tr>
                </thead>
                <tbody id="contenidoCarrito" class="bg-white">
                </tbody>
            </table>
            <p class="total mt-4 text-lg">Total: $<span id="totalCarrito">0.00</span></p>
            <p id="mensajeError" class="text-red-500 mt-2 hidden">Agrega un producto antes de comprar.</p>
            <button class="bg-green-500 text-white px-4 py-2 mt-4 rounded hover:bg-green-600" onclick="comprar()">
                Comprar
            </button>
        </div>
    </div>

    <script>
        function actualizarCarrito() {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            let contenidoCarrito = document.getElementById('contenidoCarrito');
            let totalCarrito = 0;

            contenidoCarrito.innerHTML = '';

            carrito.forEach((producto, index) => {
                let fila = document.createElement('tr');

                fila.innerHTML = `
                    <td class="p-2 border border-gray-300">${producto.nombre}</td>
                    <td class="p-2 border border-gray-300">${producto.cantidad}</td>
                    <td class="p-2 border border-gray-300">${(producto.precio * producto.cantidad).toFixed(2)}</td>
                    <td class="p-2 border border-gray-300"><button class="text-red-500 hover:underline" onclick="eliminarProducto(${index})">Eliminar</button></td>
                `;

                contenidoCarrito.appendChild(fila);
                totalCarrito += producto.precio * producto.cantidad;
            });

            document.getElementById('totalCarrito').textContent = totalCarrito.toFixed(2);
        }

        function agregarProducto(nombre, precio, cantidad) {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

            let productoExistente = carrito.find(producto => producto.nombre === nombre);

            if (productoExistente) {
                productoExistente.cantidad = parseInt(productoExistente.cantidad) + parseInt(cantidad);
            } else {
                carrito.push({ nombre, precio, cantidad });
            }

            localStorage.setItem('carrito', JSON.stringify(carrito));
            actualizarCarrito();
        }

        function eliminarProducto(index) {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.splice(index, 1);
            localStorage.setItem('carrito', JSON.stringify(carrito));
            actualizarCarrito();
        }

        function comprar() {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

            if (carrito.length === 0) {
                document.getElementById('mensajeError').classList.remove('hidden');
            } else {
                window.location.href = 'gracias.html';
            }
        }

        window.onload = actualizarCarrito;

        const menuToggle = document.getElementById('menu-toggle');
        const menu = document.getElementById('menu');

        menuToggle.addEventListener('change', function () {
            if (menuToggle.checked) {
                menu.classList.remove('hidden');
            } else {
                menu.classList.add('hidden');
            }
        });
    </script>

</body>

</html>